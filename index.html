<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        body {
            overflow-y: hidden;
            overflow-x: hidden;
            font-family: "Courier new", "Cambria";
        }
        canvas {
            width: 100%;
            height: auto;
            border: 1px black solid;
            overflow-y: hidden;
            overflow-x: hidden;
        }
        header {
            text-align: center;

        }
        footer {
            text-align: center;
        }
    </style>

    <title>Document</title>
</head>
<body onload="innit()">
    <header>
        <h1>Dig UP!</h1>
        <span>Archeology-base memory game.</span>
    </header>
    <main>
        <span id="output">Output:</span>
        <canvas id="Window">This element is unsupported.</canvas>
    </main>
    <footer>
        <span>Are you having trouble with this game? I have made a quick peice of information to assit you on your digging. <a target="_blank" href="html/help.html">Click here.</a></span>
    </footer>


    <script>
        mx = 2;
        mz = 2;
        vx, vz = 0;

        ox = 2;
        oz = 2;

        function innit() {
            canvas = document.getElementById("Window");
            ctx = canvas.getContext("2d");

            document.addEventListener("keydown", keyDown);
            document.addEventListener("keyup", keyUp);
            document.addEventListener("click", click);

            // array for tile gen

            setInterval(main, 20);
            setInterval(draw, 20);
        }

        function main() {
            clear();
            map_Render(100, 100, ox, oz, 10, 10);

            document.getElementById("output").innerHTML = String(mx+", "+mz);

            if (vx != 0) {
                mx += vx;
            }
            if (vz != 0) {
                mz += vz;
            }
        }

        function map_Render(maxX, maxZ, cx, cz, size_x, size_z) {
            this.maxX = maxX + cx;
            this.maxZ = maxZ + cz;
            for (x = cx; x < maxX; x++) {
                for (z = cz; z < maxZ; z++) {
                    draw(1, true, "#00FF00", x*size_x, z*size_z, size_x, size_z);
                }
            }
        }

        function keyDown() {
            // document.getElementById("output").innerHTML = event.keyCode;

            var keyCode = event.keyCode;

            if (keyCode == 87) {
                vz = 1;
            }
            if (keyCode == 65) {
                vx = -1;
            }
            if (keyCode == 68) {
                vx = 1;
            }
            if (keyCode == 83) {
                vz = -1;
            }
        }

        function keyUp() {
            // document.getElementById("output").innerHTML = "Key Up";

            var keyCode = event.keyCode;

            if (keyCode == 87) {
                vz = 0;
            }
            if (keyCode == 65) {
                vx = 0;
            }
            if (keyCode == 68) {
                vx = 0;
            }
            if (keyCode == 83) {
                vz = 0;
            }
        }

        function click() {
            // document.getElementById("output").innerHTML = "Mouse Click";
        }

        function draw(type, fill, color, x, y, size_x, size_y) {
            ctx.beginPath();

            if (type == 1 && fill == false) {
                ctx.rect(x, y, size_x, size_y);
            }
            if (color != "") {
                if (type == 1 && fill == true) {
                    ctx.fillStyle = color;
                    ctx.fillRect(x, y, size_x, size_y);
            }
            }


            if (fill == true && color == "") {
                ctx.fill();
            }

            ctx.stroke()
        }
        
        function clear() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
    </script>
</body>
</html>